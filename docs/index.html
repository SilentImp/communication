<!DOCTYPE html><html lang="ru"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><title>Payment Request API</title><link href="css/styles.css" rel="stylesheet"><script data-main="js/presentation" src="js/requirejs/require.js"></script></head><body><form class="go-to-page" action="/select/slide" method="post"><fieldset><input type="text" maxlength="3" value="" placeholder="1"></fieldset></form><section class="progress"><div class="value"></div></section><section class="dark" id="slides"><article class="illustration illustration--title cloud cloud--title"><h1><p class="wrapper">Make<br>checkout<br>great again</p></h1></article><article class="screen screen--checkout-desktop"></article><article class="screen screen--checkout-mobile"></article><article class="screen screen--s1"></article><article class="screen screen--s2"></article><article class="screen screen--s3"></article><article class="screen screen--s4"></article><article class="screen screen--s5"></article><article class="screen screen--autofill overlay"><div class="overlay__abstract overlay__abstract--right"><h3 class="overlay__title">Autofill</h3><img class="overlay__qr" src="images/autofill.svg" alt="QRCODE cо ссылкой"><p><a class="overlay__link" href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#autofill" data-click>https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#autofill</a></p></div></article><article class="example example--autofill"><form action="/"><fieldset><legend> Адрес доставки</legend><input name="filed1" type="text" placeholder="Страна"><input name="filed2" type="text" placeholder="Гoрoд"><input name="filed3" type="text" placeholder="Улица"></fieldset><fieldset><legend> Контакты</legend><input name="tel" type="tel" placeholder="Телефон"><input name="email" type="email" placeholder="Email"></fieldset><fieldset><legend> Платежная карта</legend><input name="cfc-number" type="text" placeholder="Номер"><input name="cfc-name" type="text" placeholder="Владелец"><input name="cfc-exp" type="text" placeholder="Годна до"><input name="cfc-csc" type="text" placeholder="CVC"></fieldset></form></article><article class="example example--autofill"><form action="/"><fieldset><legend> Адрес доставки</legend><input autocomplete="country-name" name="country-name" type="text" placeholder="Страна"><input autocomplete="address-level2" name="address-level2" type="text" placeholder="Город"><input autocomplete="street-address" name="street-address" type="text" placeholder="Адрес"></fieldset><fieldset><legend> Контакты</legend><input autocomplete="tel" name="tel" type="tel" placeholder="Телефон"><input autocomplete="email" name="email" type="email" placeholder="Email"></fieldset><fieldset><legend> Платежная карта</legend><input autocomplete="cc-number" name="cc-number" type="text" placeholder="Номер"><input autocomplete="cc-name" name="cc-name" type="text" placeholder="Владелец"><input autocomplete="cc-exp" name="cc-exp" type="text" placeholder="Годна до"><input autocomplete="cc-csc" name="cc-csc" type="text" placeholder="CVC"></fieldset></form></article><article class="center code-6"><pre><code class="html">&lt;input
    autocomplete="street-address"
    name="street-address"
    type="text"
    placeholder="Адрес" /&gt;</code></pre></article><article class="center code-6"><div class="wrapper"><pre><code class="html">&lt;input
    autocomplete="address-level2"
    name="address-level2"
    type="text"
    placeholder="Номер карты" /&gt;
</code></pre></div></article><article class="center code-6"><div class="wrapper"><pre><code class="html">&lt;input
    autocomplete="cc-number"
    name="cc-number"
    type="text"
    placeholder="Город" /&gt;
</code></pre></div></article><article class="screen screen--autofill-settings"></article><article class="screen screen--cred overlay"><div class="overlay__abstract overlay__abstract--right"><h3 class="overlay__title">Credential Management Level 1</h3><img class="overlay__qr" src="images/cred.svg" alt="QRCODE cо ссылкой"><p><a class="overlay__link" href="https://w3.org/TR/credential-management-1/" data-click>https://w3.org/TR/credential-management-1/</a></p></div></article><article class="screen screen--auth overlay"><div class="overlay__abstract overlay__abstract--left"><h5 class="overlay__title">Web Authentication: An API for accessing Public Key Credentials Level 1</h5><img class="overlay__qr" src="images/auth.svg" alt="QRCODE cо ссылкой"><p><a class="overlay__link" href="https://w3.org/TR/webauthn/" data-click>https://w3.org/TR/webpayments-overview/</a></p></div></article><article class="screen screen--creds"></article><article class="center code-6"><div class="wrapper"><pre><code class="js">if (window.PasswordCredential) {
    //…
}
</code></pre></div></article><article class="center code-6"><div class="wrapper"><pre><code class="js">navigator.credentials.get({
        password: true,
        mediation: 'optional',
    }).then({…});
</code></pre></div></article><article class="center"><div class="wrapper"><ul class="need"><li> required</li><li> optional</li><li> silent</li></ul></div></article><article class="center code-6"><div class="wrapper"><pre><code class="js">navigator
    .credentials
        .preventSilentAccess();</code></pre></div></article><article class="center code-0"><div class="wrapper"><pre><code class="js">navigator.credentials.get({…})
    .then(credential => {
        if (credential) {
            // credential.password
            // credential.id
        }
    });
</code></pre></div></article><article class="screen screen--passwords"></article><article class="screen screen--usecreds"></article><article class="screen screen--wpwg overlay"><div class="overlay__abstract overlay__abstract--right"><h3 class="overlay__title">Web payments working group</h3><img class="overlay__qr" src="images/qr-w3-org.svg" alt="QRCODE cо ссылкой"><p><a class="overlay__link" href="https://www.w3.org/Payments/WG" data-click>https://www.w3.org/Payments/WG</a></p></div></article><article class="screen screen--overview overlay"><div class="overlay__abstract overlay__abstract--right"><h3 class="overlay__title">Web Payments Overview 1.0</h3><img class="overlay__qr" src="images/wpo.svg" alt="QRCODE cо ссылкой"><p><a class="overlay__link" href="https://www.w3.org/TR/webpayments-overview/" data-click>https://www.w3.org/TR/webpayments-overview/</a></p></div></article><article class="screen screen--pra overlay"><div class="overlay__abstract overlay__abstract--right"><h3 class="overlay__title">Payment Request API</h3><img class="overlay__qr" src="images/pra.svg" alt="QRCODE cо ссылкой"><p><a class="overlay__link" href="https://www.w3.org/TR/payment-request/" data-click>https://www.w3.org/TR/payment-request/</a></p></div></article><article class="screen screen--appay overlay"><div class="overlay__abstract overlay__abstract--right"><h4 class="overlay__title">Introducing the Payment Request API for Apple Pay</h4><img class="overlay__qr" src="images/appay.svg" alt="QRCODE cо ссылкой"><p><a class="overlay__link" href="https://webkit.org/blog/8182/introducing-the-payment-request-api-for-apple-pay/" data-click>https://webkit.org/blog/8182/introducing-the-payment-request-api-for-apple-pay/</a></p></div></article><article class="screen screen--autofill-config"></article><article class="screen screen--can"></article><article class="example example--payment"><button type="button" id="pay">Купить</button><script>const methodData = [{
    supportedMethods: "basic-card",
}];
const details = {
  id: "order-1",
  displayItems: [{
    label: "Вотлшебный Говорящий Медведь-Проститутка",
    amount: {
      currency: "USD",
      value: "5.00"
    },
  },{
    label: "Cвинка",
    amount: {
      currency: "USD",
      value: "3.00"
    },
  }],
  total: {
    label: "Всего",
    amount: {
      currency: "USD",
      value: "8.00"
    },
  },
};
const options = {
  requestPayerEmail: true,
  requestPayerName: true,
  requestPayerPhone: true,
  requestShipping: false,
}
let request = new PaymentRequest(methodData, details, options);
const button = document.getElementById('pay');
const validate = function () {
    return Math.round(Math.random()) === 1 ? 'success' : 'fail';
}
const check = async function () {
    try {
        const response = await request.show();
        console.log(response);
        await response.complete(validate());
    } catch (error) {}
    request = new PaymentRequest(methodData, details, options);
};
button.addEventListener('click', check);
</script></article><article class="center"><div class="wrapper"><ul class="need"><li> methodData</li><li> details</li><li> methooptionsdData</li></ul></div></article><article class="center code-6"><div class="wrapper"><pre><code class="html">&lt;button id="pay"&gt;Купить&lt;/button &gt;
</code></pre></div></article><article class="center code-6"><div class="wrapper"><pre><code class="js">const methodData = [{
    supportedMethods: "basic-card",
}];
</code></pre></div></article><article class="center code-3"><div class="wrapper"><pre><code class="js">const methodData = [{
    supportedMethods: "https://apple.com/apple-pay",
    data: {
        version: 3,
        merchantIdentifier: "merchant.com.example",
        merchantCapabilities: [
            "supports3DS",
            "supportsCredit",
            "supportsDebit"],
        supportedNetworks: ["amex", "discover", "masterCard", "visa"],
        countryCode: "US",
    },
}];
</code></pre></div></article><article class="center code-2"><div class="wrapper"><pre><code class="js">const details = {
  id: "order-1",
  displayItems: [{
    label: "Вотлшебный Говорящий Медведь-Проститутка",
    amount: {
      currency: "USD",
      value: "5.00"
    },
  },</code></pre></div></article><article class="center code-1"><div class="wrapper"><pre><code class="js">{
  label: "Cвинка",
  amount: {
    currency: "USD",
    value: "3.00"
  },
}],</code></pre></div></article><article class="center code-1"><div class="wrapper"><pre><code class="js">  total: {
    label: "Всего",
    amount: {
      currency: "USD",
      value: "8.00"
    },
  },
};</code></pre></div></article><article class="center code-0"><div class="wrapper"><pre><code class="js">const options = {
  requestPayerEmail: true,
  requestPayerName: true,
  requestPayerPhone: true,
  requestShipping: false,
};
</code></pre></div></article><article class="center code-6"><div class="wrapper"><pre><code class="js">let request = new PaymentRequest(
    methodData,
    details,
    options);</code></pre></div></article><article class="center code-1"><div class="wrapper"><pre><code class="js">const button = document.getElementById('pay');
button.addEventListener('click', pay);
</code></pre></div></article><article class="center code-1"><div class="wrapper"><pre><code class="js">const pay = async function () {
    const response = await request.show();
    await response.complete(validate());
    …
};
</code></pre></div></article><article class="center code-2"><div class="wrapper"><pre><code class="json">{
    details: {},
    methodName: "basic-card",
    payerEmail: "thesilentimp@gmail.com",
    payerName: "Anton",
    payerPhone: "+380502773882",
    requestId: "order-1",
    shippingAddress: null,
    shippingOption: null,
}
</code></pre></div></article><article class="screen screen--bcp overlay"><div class="overlay__abstract overlay__abstract--right"><h3 class="overlay__title">Basic Card Payment</h3><img class="overlay__qr" src="images/bcp.svg" alt="QRCODE cо ссылкой"><p><a class="overlay__link" href="https://www.w3.org/TR/payment-method-basic-card/" data-click>https://www.w3.org/TR/payment-method-basic-card/</a></p></div></article><article class="screen screen--pmi overlay"><div class="overlay__abstract overlay__abstract--right"><h3 class="overlay__title">Payment Method Identifiers</h3><img class="overlay__qr" src="images/pmi.svg" alt="QRCODE cо ссылкой"><p><a class="overlay__link" href="https://www.w3.org/TR/payment-method-id/" data-click>https://www.w3.org/TR/payment-method-id/</a></p></div></article><article class="screen screen--pmm overlay"><div class="overlay__abstract overlay__abstract--right"><h3 class="overlay__title">Payment Method Manifest</h3><img class="overlay__qr" src="images/pmi.svg" alt="QRCODE cо ссылкой"><p><a class="overlay__link" href="https://www.w3.org/TR/payment-method-manifest/" data-click>https://www.w3.org/TR/payment-method-manifest/</a></p></div></article><article class="screen screen--stripe"></article><article class="screen screen--stripe-atlas"></article><article class="screen screen--stripe-delawer"></article><article class="screen screen--stripe-product"></article><article class="screen screen--moto overlay"><div class="overlay__abstract overlay__abstract--right"><h3 class="overlay__title">MOTO.COURSES</h3><img class="overlay__qr" src="images/motoc.svg" alt="QRCODE cо ссылкой"><p><a class="overlay__link" href="https://moto.courses/" data-click>https://moto.courses/</a></p><p><a class="overlay__link" href="https://github.com/SilentImp/moto.courses" data-click>https://github.com/SilentImp/moto.courses</a></p></div></article><article class="center code-0"><div class="wrapper"><pre><code class="html">&lt;script src="https://js.stripe.com/v3/"></script>

</code></pre></div></article><article class="center code-0"><div class="wrapper"><pre><code class="js">if (Stripe !== undefined) {
    const stripe = Stripe('pk_cQQjittH');
    // …
}
</code></pre></div></article><article class="center code-6"><div class="wrapper"><pre><code class="js">const items = [{
    amount: 4000
    , label: 'maintenance.course'
}];
</code></pre></div></article><article class="center code-3"><div class="wrapper"><pre><code class="js">const paymentRequest = stripe.paymentRequest({
  country: 'US'
  , currency: 'uah'
  , requestPayerName: true
  , requestPayerEmail: true
  , requestPayerPhone: true
  , requestShipping: false
  , displayItems: items
  , total: {
    label: 'Мастеркласс'
    , amount: 4000
  }});
</code></pre></div></article><article class="center code-0"><div class="wrapper"><pre><code class="js">const elements = stripe.elements();
  const prButton = elements.create(
    'paymentRequestButton',
    { paymentRequest }
  );
</code></pre></div></article><article class="center code-0"><div class="wrapper"><pre><code class="js">const response = await fetch('/skus');
const sku = await response.json();
</code></pre></div></article><article class="center code-2"><div class="wrapper"><pre><code class="js">const stripe = require('stripe')('sku_CckkusdfZ');
stripe.skus.retrieve('sku_CckkusdfZ',
  (error, sku) => {
    if (error === null) {
      res.send(JSON.stringify(sku)).status(200).end();
    } else {
      res.status(error.statusCode, error.message)
        .end(http.STATUS_CODES[error.statusCode]);
    }});
</code></pre></div></article><article class="center code-2"><div class="wrapper"><pre><code class="js">const result = await paymentRequest.canMakePayment();
if (result) {
    prButton.mount('#payment-request-button');
} else {
    // …
}
</code></pre></div></article><article class="center code-2"><div class="wrapper"><pre><code class="js">paymentRequest.on('token', async (event) => {
    const { token } = event;
    const response = await fetch('/order', {
        method: 'POST'
        , body: JSON.stringify({ token, sku })
        , headers: {'content-type': 'application/json'}
    });
});
</code></pre></div></article><article class="center code-2"><div class="wrapper"><pre><code class="js">const order = await stripe.orders.create({
  email: token.email
  , currency: sku.currency
  , items: [{
      type: 'sku'
      , parent: sku.id
    }]});

</code></pre></div></article><article class="center code-2"><div class="wrapper"><pre><code class="js">const paidOrder = await stripe.orders.pay(order.id, {
  source: (token.livemode ? token.id : 'tok_visa'),
});

const fulfilledOrder = await stripe.orders
    .update(order.id, {
      status: 'fulfilled'
    });

res.send(JSON.stringify(fulfilledOrder))
    .status(200).end();
</code></pre></div></article><article class="screen screen--letter"></article><article class="screen screen--ap1"></article><article class="screen screen--gp1"></article><article class="screen screen--gp2"></article><article class="screen screen--gp3"></article><article class="contacts center qrcode"><div class="wrapper"><div class="about-speaker half"><p class="name">Антон Немцев</p><p class="link">http://silentimp.info/</p><p class="twitter">@silentimp</p><p class="email">thesilentimp@gmail.com</p><p class="skype">skype: ravencry</p></div><div class="half"><img src="images/git.svg" alt="QRCODE cо ссылкой на доклад"></div><p><a href="https://github.com/SilentImp/LayoutTalk" data-click>https://goo.gl/y3lvfc</a></p></div></article></section></body></html>